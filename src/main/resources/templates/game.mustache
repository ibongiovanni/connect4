
<SCRIPT LANGUAGE="JavaScript1.2">
   <!--
      NS4 = document.layers;
      if (NS4) {
         origWidth = innerWidth;
         origHeight = innerHeight;
      }   
   function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight) 
         location.reload();
   }   
   if (NS4) onresize = reDo;
   //-->
</SCRIPT>
<!DOCTYPE html>
<html>
	<head>
        <link rel="stylesheet" type="text/css" href="siteStyle">
        <title>CONNECT4</title>
        <script src="js/jquery.min.js">
        </script>
        <script>

            function reload (ev){
                    console.log(ev);
                    console.log(this);
                    var game_id = this.id;
                    var column = this.value-1;
                    $("#container").load("/drop #gameboard",{"game_id": game_id, "column": column}, enableAJAX);
                    ev.preventDefault();   
                    return false;
            }

            $(document).ready( function(){
                $(".dropButton").on("click", reload)
            });

            function enableAJAX (data){
                $(".dropButton").on("click", reload);
                console.log(data); 
            }

            /*
            $(document).ready( function(){
                $(".boton").on("click",function(ev){
                    console.log(ev);
                    console.log(this);
                    var game_id = {{game_id}};
                    var column = this.value-1;
                    // $.ajax({
                    //     method: "POST",
                    //     url: "/drop",
                    //     //dataType: "json",
                    //     data: {"game_id": game_id, "column": column},
                    //     success: function( msg ) {
                    //         alert( "Data Saved: " + msg );
                    //     }     
                    // });
                    $("#gameboard").load("/drop #table",{"game_id": game_id, "column": column});
                    //return true;
                    ev.preventDefault();   
                    return false;
                });
            }); 
            */
        </script>
    </head>
    <body>
        <div align="center" class="header">
            <img src="connect-4-logo.png" class="logo">
        </div>
        <div id="container" class="marco" {{#finished}} style="padding-bottom:12px;" {{/finished}}>      
            <div id="gameboard" class="cuerpo2" align="center">
                <br>
                <table align="center">
                    <caption style="color:{{colored}};margin-bottom: 7px;">{{message}}</caption>
                    <audio controls autoplay="true" hidden="true">
                      <source src={{sound}} type="audio/mpeg">
                    </audio> 
              		<th>
                     <button class="boton dropButton" id="{{game_id}}" value="1">1</button>  
                    </th>
                	<th>
                     <button class="boton dropButton" id="{{game_id}}" value="2">2</button>   
                    </th> 
                	<th>
                     <button class="boton dropButton" id="{{game_id}}" value="3">3</button>
                    </th>
                	<th>
                     <button class="boton dropButton" id="{{game_id}}" value="4">4</button>
                    </th>
                	<th>
                     <button class="boton dropButton" id="{{game_id}}" value="5">5</button>
                    </th>
                	<th>
                     <button class="boton dropButton" id="{{game_id}}" value="6">6</button>
                    </th>
                	<th>
                     <button class="boton dropButton" id="{{game_id}}" value="7">7</button>
                    </th>
              		
              		<tr>
                    	<td id="{{celda1}}">{{celda1}}</td>
                    	<td id="{{celda2}}">{{celda2}}</td>
                    	<td id="{{celda3}}">{{celda3}}</td>
                    	<td id="{{celda4}}">{{celda4}}</td>
                    	<td id="{{celda5}}">{{celda5}}</td>
                    	<td id="{{celda6}}">{{celda6}}</td>
                    	<td id="{{celda7}}">{{celda7}}</td>
                	</tr>
                	<tr>
                    	<td id="{{celda8}}">{{celda8}}</td>
                    	<td id="{{celda9}}">{{celda9}}</td>
                    	<td id="{{celda10}}">{{celda10}}</td>
                    	<td id="{{celda11}}">{{celda11}}</td>
                    	<td id="{{celda12}}">{{celda12}}</td>
                    	<td id="{{celda13}}">{{celda13}}</td>
                    	<td id="{{celda14}}">{{celda14}}</td>
                	</tr>
                	<tr>
                    	<td id="{{celda15}}">{{celda15}}</td>
                    	<td id="{{celda16}}">{{celda16}}</td>
                    	<td id="{{celda17}}">{{celda17}}</td>
                    	<td id="{{celda18}}">{{celda18}}</td>
                    	<td id="{{celda19}}">{{celda19}}</td>
                    	<td id="{{celda20}}">{{celda20}}</td>
                    	<td id="{{celda21}}">{{celda21}}</td>
                	</tr>
                	<tr>
                    	<td id="{{celda22}}">{{celda22}}</td>
                    	<td id="{{celda23}}">{{celda23}}</td>
                    	<td id="{{celda24}}">{{celda24}}</td>
                    	<td id="{{celda25}}">{{celda25}}</td>
                    	<td id="{{celda26}}">{{celda26}}</td>
                    	<td id="{{celda27}}">{{celda27}}</td>
                    	<td id="{{celda28}}">{{celda28}}</td>
                	</tr>
                	<tr>
                    	<td id="{{celda29}}">{{celda29}}</td>
                    	<td id="{{celda30}}">{{celda30}}</td>
                    	<td id="{{celda31}}">{{celda31}}</td>
                    	<td id="{{celda32}}">{{celda32}}</td>
                    	<td id="{{celda33}}">{{celda33}}</td>
                    	<td id="{{celda34}}">{{celda34}}</td>
                    	<td id="{{celda35}}">{{celda35}}</td>
                	</tr>
                	<tr>
                    	<td id="{{celda36}}">{{celda36}}</td>
                    	<td id="{{celda37}}">{{celda37}}</td>
                    	<td id="{{celda38}}">{{celda38}}</td>
                    	<td id="{{celda39}}">{{celda39}}</td>
                    	<td id="{{celda40}}">{{celda40}}</td>
                    	<td id="{{celda41}}">{{celda41}}</td>
                    	<td id="{{celda42}}">{{celda42}}</td>
                	</tr>
            	</table>
                <div class="cuerpo">
                    <p style='color:{{colored}};margin-bottom: 4px;margin-top: 18px;'>
                        {{#finished}}
                            <form method="post" action="/create_game" style="margin-left:35px; margin-bottom: 2px;">
                                <input type="hidden" name="player_1" value="{{p2id}}">
                                <input type="hidden" name="player_2" value="{{p1id}}">
                                <button class="boton" style="width:125px; box-shadow: -5px 5px 1px rgba(0, 0, 0, 0.5);" type="submit" value="1">Play Again?</button>
                            </form>
                            <button class="boton" 
                                        style=" width:125px; 
                                                box-shadow: -5px 5px 1px rgba(0, 0, 0, 0.5); 
                                                margin-left: 35px; 
                                                margin-top: 3px;" 
                                        onclick="location.href='/'">Back To Home</button>
                        {{/finished}}
                    </p>
                </div>
            </div>
        </div>
    </body>
</html>